name: Smash Brothers (North America)
sha1: e2929e10fccc0aa84e5776227e798abc07cedabf
options:
  basename: smashbrothers
  target_path: baserom.z64
  elf_path: build/smashbrothers.elf
  base_path: .
  platform: n64
  compiler: IDO

  # asm_path: asm
  # src_path: src
  build_path: bin
  # create_asm_dependencies: True

  ld_script_path: smashbrothers.ld
  ld_dependencies: True

  find_file_boundaries: True
  header_encoding: ASCII

  o_as_suffix: True
  use_legacy_include_asm: False

# problematic when running assembler
#  mips_abi_float_regs: "32"

  asm_function_macro: glabel
  asm_jtbl_label_macro: jlabel
  asm_data_macro: dlabel

  # section_order: [".text", ".data", ".rodata", ".bss"]
  # auto_all_sections: [".data", ".rodata", ".bss"]

  symbol_addrs_path:
    - symbols/libultra.txt
    - symbols/ovl6.txt
    # - symbols/ovl7.txt
    - symbols/ovl26.txt
  reloc_addrs_path:
    - reloc_addrs.txt

  # undefined_funcs_auto_path: undefined_funcs_auto.txt
  # undefined_syms_auto_path: undefined_syms_auto.txt

  extensions_path: tools/splat_ext

  # string_encoding: ASCII
  # data_string_encoding: ASCII
  rodata_string_guesser_level: 2
  data_string_guesser_level: 2
  # libultra_symbols: True
  # hardware_regs: True
  # gfx_ucode: # one of [f3d, f3db, f3dex, f3dexb, f3dex2]
segments:
  - name: header
    type: header
    start: 0x0

  - name: boot
    type: code
    start: 0x40
    vram: 0xA4000040
    subsegments:
      - [0x40, hasm, boot_hasm]
      - [0xB60]

  - name: entry
    type: code
    start: 0x1000
    vram: 0x80000400
    subsegments:
      - [0x1000, hasm, entry_hasm]
      - [0x1040]

  - name: main
    type: code
    start: 0x1060
    vram: 0x80000460
    follows_vram: entry
    bss_size: 0x61EA0
    subsegments:
      - [0x1060, asm, main/main]
      - [0x3A2B0, hasm, main/main_hasm]
      - [0x3A2C0]
      # - [0x3A3E0, data]
      # - { start: 0x406D0, type: bss, vram: 0x8003FAD0 }

  - type: bin
    start: 0x406D0
    follows_vram: main
  - [0x1000000]

  - name: libultra
    type: code
    start: 0x24480
    vram: 0x80023880
    subsegments:
      - [0x024480, asm, libultra/sprite]
      - [0x026B10, asm, libultra/io/sptaskyield]
      - [0x026BC0, asm, libultra/audio]
      - [0x030C00, asm, libultra/os/sendmesg]
      - [0x030D50, asm, libultra/os/stopthread]
      - [0x030E10, asm, libultra/os/recvmesg]
      - [0x030F50, hasm, libultra/os/setintmask]
      - [0x030FF0, asm, libultra/gu/sinf]
      - [0x0311B0, asm, libultra/io/sptask]
      - [0x0314A0, asm, libultra/os/destroythread]
      - [0x0315B0, asm, libultra/libc/ll]
      - [0x031870, hasm, libultra/os/exceptasm]
      - [0x031F8C, asm, libultra/os/unk_31F8C]
      - [0x031FE4, hasm, libultra/os/dispatchthread]
      - [0x032160, asm, libultra/os/thread]
      - [0x0321B0, hasm, libultra/libc/bzero]
      - [0x032250, asm, libultra/motor]
      - [0x032620, asm, libultra/io/siacs]
      - [0x0326E0, asm, libultra/unk_326E0]
      - [0x032A20, asm, libultra/os/createthread]
      - [0x032B70, asm, libultra/contramdata]
      - [0x032D50, asm, libultra/os/virtualtophysical]
      - [0x032DD0, hasm, libultra/os/writebackdcache]
      - [0x033110, asm, libultra/createspeedparam]
      - [0x0331B0, asm, libultra/io/pirawread]
      - [0x033210, asm, libultra/nops1]
      - [0x033270, hasm, libultra/os/setsr]
      - [0x033280, hasm, libultra/os/getsr]
      - [0x0332D0, asm, libultra/io/sprawdma]
      - [0x033460, asm, libultra/io/viblack]
      - [0x0334D0, asm, libultra/io/sirawread]
      - [0x033540, asm, libultra/gu/mtxutil]
      - [0x0337B0, asm, libultra/io/visetmode]
      - [0x033820, asm, libultra/os/probetlb]
      - [0x033B10, asm, libultra/nops2]
      - [0x033B20, asm, libultra/io/devmgr]
      - [0x033FB0, asm, libultra/io/pirawdma]
      - [0x034090, asm, libultra/os/getcount]
      - [0x0340A0, asm, libultra/os/seteventmesg]
      - [0x034110, asm, libultra/gu/sqrtf]
      - [0x034120, asm, libultra/unk_34120]
      - [0x034140, asm, libultra/io/contquery]
      - [0x0341F0, asm, libultra/libc/xprintf]
      - [0x034EB0, hasm, libultra/unk_34EB0_hasm]
      - [0x034F00, asm, libultra/io/epidma]
      - [0x034FE0, asm, libultra/libc/string]
      - [0x035080, asm, libultra/os/createmesgqueue]
      - [0x0350B0, hasm, libultra/os/invalicache]
      - [0x035130, hasm, libultra/os/invaldcache]
      - [0x0351E0, asm, libultra/io/sp]
      - [0x035210, asm, libultra/io/si]
      - [0x035240, asm, libultra/os/jammesg]
      - [0x035390, asm, libultra/os/setthreadpri]
      - [0x035490, asm, libultra/io/viswapbuf]
      - [0x0356F0, asm, libultra/io/epirawdma]
      - [0x0358D0, asm, libultra/io/sptaskyielded]
      - [0x035950, asm, libultra/os/gettime]
      - [0x0359E0, asm, libultra/os/timerintr]
      - [0x035DE0, asm, libultra/os/setglobalintmask]
      - [0x036010, asm, libultra/os/setcompare]
      - [0x036030, hasm, libultra/libc/bcopy]
      - [0x0363C0, asm, libultra/os/resetglobalintmask]
      - [0x036420, hasm, libultra/os/interrupt]
      - [0x036460, asm, libultra/io/vi]
      - [0x0368A0, asm, libultra/io/pigetcmdq]
      - [0x0368D0, asm, libultra/gu/cosf]
      - [0x036A40, asm, libultra/os/settime]
      - [0x036A70, asm, libultra/io/visetevent]
      - [0x036D40, hasm, libultra/os/setfpccsr]
      - [0x036D50, asm, libultra/io/epirawread]
      - [0x036EB0, hasm, libultra/os/maptlbrdb]
      - [0x036F10, asm, libultra/os/yieldthread]
      - [0x036FB0, asm, libultra/io/contramwrite]
      - [0x037200, asm, libultra/pfsgetstatus]
      - [0x037430, asm, libultra/contpfs]
      - [0x0380D0, asm, libultra/io/contramread]
      - [0x038300, asm, libultra/crc]
      - [0x038470, asm, libultra/io/pfsisplug]
      - [0x0387B0, asm, libultra/io/epirawwrite]
      - [0x038910, asm, libultra/os/settimer]
      - [0x0389F0, asm, libultra/libc/xldtob]
      - [0x0394B0, asm, libultra/libc/ldiv]
      - [0x039640, asm, libultra/libc/xlitob]
      - [0x0398E0, asm, libultra/io/sirawwrite]
      - [0x039A30, asm, libultra/nops3]
      - [0x039A40, asm, libultra/vimgr]
      - [0x039D60, hasm, libultra/os/writebackdcacheall]
      - [0x039D90, asm, libultra/os/startthread]
      - [0x03A150, asm, libultra/io/aisetnextbuf] # different from sf64
      - [0x03A200, asm, libultra/io/ai]
      - [0x03A270, asm, libultra/io/spsetpc]
      - [0x03A2B0, hasm, libultra/unk_3A2B0_hasm]
      - [0x3A2C0]


  - name: ovl0
    type: code
    start: 0x04F860
    vram: 0x800D3E80
    subsegments:
      - [0x049A00, asm, ovl0/nops]
      - [0x049A20, asm, ovl0/hal_bitmap]
      - [0x04F860, asm, ovl0/ovl0_2]
      - [0x04FB10, asm, ovl0/ovl0_3]
      - [0x04FF00, asm, ovl0/ovl0_4]
      - [0x050680, data, ovl0/float_table]
      - [0x051680, data, ovl0/function_table]
      - [0x051740]

  - name: ovl2
    type: code
    start: 0x051C90
    vram: 0x800D6490
    subsegments:
      - [0x051C90, asm, ovl2/ovl2]
      - [0x0923D0, data, ovl2]
      - [0x0AC540]

  - name: ovl3
    type: code
    start: 0x0AC540
    vram: 0x80131B00
    subsegments:
      - [0x0AC540, asm, ovl3/ovl3]
      - [0x1010A0, data, ovl3]
      - [0x1079C0]

  - name: ovl1
    type: code
    start: 0x1079C0
    vram: 0x803903E0
    subsegments:
      - [0x1079C0, asm, ovl1/ovl1]
      - [0x1081C0, data, ovl1]
      - [0x109FB0]

  - name: ovl4
    type: code
    start: 0x109FB0
    vram: 0x8018D0C0
    exclusive_ram_id: overlay_8018D0C0
    subsegments:
      - [0x109FB0, asm, ovl4/ovl4]
      - [0x10B2C0, data, ovl4]
      - [0x10B370]

  - name: ovl5
    type: code
    start: 0x10B370
    vram: 0x8018D0C0
    exclusive_ram_id: overlay_8018D0C0
    subsegments:
      - [0x10B370, asm, ovl5/ovl5]
      - [0x10B830, data, ovl5]
      - [0x10B920]

  - name: ovl65
    type: code
    start: 0x10B920
    vram: 0x8018D0C0
    exclusive_ram_id: overlay_8018D0C0
    subsegments:
      - [0x10B920, asm, ovl65/ovl65]
      - [0x111060, data, ovl65]
      - [0x111800]

  - name: ovl6
    type: code
    start: 0x111800
    vram: 0x8018D0C0
    exclusive_ram_id: overlay_8018D0C0
    subsegments:
      - [0x111800, asm, ovl6/ovl6]
      - [0x113600, data, ovl6]
      - [0x1138E0]

  - name: ovl7
    type: code
    start: 0x1138E0
    vram: 0x8018D0C0
    exclusive_ram_id: overlay_8018D0C0
    subsegments:
      - [0x1138E0, asm, ovl7/ovl7]
      - [0x116F90, data, ovl7]
      - [0x117180]

  - name: ovl10
    type: code
    start: 0x117180
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x117180, asm, ovl10/ovl10]
      - [0x119860, data, ovl10]
      - [0x119ac0]

  - name: ovl11
    type: code
    start: 0x119ac0
    vram: 0x800D6490
    subsegments:
      - [0x119ac0, asm, ovl11/ovl11]
      - [0x119D30, data, ovl11]
      - [0x119df0]

  - name: ovl12
    type: code
    start: 0x119df0
    vram: 0x800D6490
    subsegments:
      - [0x119df0, asm, ovl12/ovl12]
      - [0x119FE0, data, ovl12]
      - [0x11a340]

  - name: ovl13
    type: code
    start: 0x11a340
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x11a340, asm, ovl13/ovl13]
      - [0x11AA20, data, ovl13]
      - [0x11b970]

  - name: ovl14
    type: code
    start: 0x11b970
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x11b970, asm, ovl14/ovl14]
      - [0x11C500, data, ovl14]
      - [0x11ca90]

  - name: ovl17
    type: code
    start: 0x11ca90
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x11ca90, asm, ovl17/ovl17]
      - [0x11DB20, data, ovl17]
      - [0x11dc10]

  - name: ovl18
    type: code
    start: 0x11dc10
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x11dc10, asm, ovl18/ovl18]
      - [0x11F190, data, ovl18]
      - [0x11f2b0]

  - name: ovl60
    type: code
    start: 0x11f2b0
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x11f2b0, asm, ovl60/ovl60]
      - [0x120DD0, data, ovl60]
      - [0x120f50]

  - name: ovl61
    type: code
    start: 0x120f50
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x120f50, asm, ovl61/ovl61]
      - [0x122370, data, ovl61]
      - [0x1224b0]

  - name: ovl19
    type: code
    start: 0x1224b0
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x1224b0, asm, ovl19/ovl19]
      - [0x125160, data, ovl19]
      - [0x1252e0]

  - name: ovl20
    type: code
    start: 0x1252e0
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x1252e0, asm, ovl20/ovl20]
      - [0x127EA0, data, ovl20]
      - [0x1280a0]

  - name: ovl21
    type: code
    start: 0x1280a0
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x1280a0, asm, ovl21/ovl21]
      - [0x1297B0, data, ovl21]
      - [0x129970]

  - name: ovl22
    type: code
    start: 0x129970
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x129970, asm, ovl22/ovl22]
      - [0x12A370, data, ovl22]
      - [0x12a4c0]

  - name: ovl23
    type: code
    start: 0x12a4c0
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x12a4c0, asm, ovl23/ovl23]
      - [0x12AD30, data, ovl23]
      - [0x12ae40]

  - name: ovl24
    type: code
    start: 0x12ae40
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x12ae40, asm, ovl24/ovl24]
      - [0x12E130, data, ovl24]
      - [0x12ef60]

  - name: ovl25
    type: code
    start: 0x12ef60
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x12ef60, asm, ovl25/ovl25]
      - [0x12FC90, data, ovl25]
      - [0x12fd80]

  - name: ovl26
    type: code
    start: 0x12fd80
    vram: 0x80131B00
    exclusive_ram_id: overlay_80131B00
    subsegments:
      - [0x12fd80, asm, ovl26_nops]
      - [0x12FDA0, asm, ovl26/ovl26]
      - [0x139620, data, ovl26]
      - [0x139D00]

  - name: ovl8
    type: code
    start: 0x18DCB0
    vram: 0x80371460
    subsegments:
      - [0x18DCB0, asm, ovl8/ovl8]
      - [0x1A44F0, data, ovl8]
      - [0x1AB6B0]

  - name: ovl9
    type: code
    start: 0x1AB6B0
    vram: 0x80369240
    subsegments:
      - [0x1AB6B0, asm, ovl9/ovl9]
      - [0x1AC3D0, data, ovl9]
      - [0x1AC870]

  - name: leftover_space
    type: bin
    start: 0xF5F4E0
